<select class="<% $class %>" id="<% $element->{id} %>" name="<% $element->{id} %>">
<option value="">-= Choose file =-</option>
% for (@files) {
%#	my $sel = $user_value && $user_value eq $_->file_path ? q{selected="selected"} : "";
%#	<option value="<% $_->file_path %>" <% $sel %>><% $_->file_name |html%></option>
%	my $sel = defined $user_value && $user_value eq $_->id ? q{selected="selected"} : "";
	<option value="<% $_->id %>" <% $sel %>><% $_->file_name |html%></option>
% }
</select>
<%args>
	$pm => undef
	$element => undef
	$user_value => undef
	$class => ''
	$filter => undef;
	$input_files_only => undef
</%args>
<%init>
	return unless $pm && $element;
	
	my @files = $input_files_only ? grep {$_->is_input} $pm->data : $pm->data;
	@files = grep {$_->file_name =~ /$filter/} @files if $filter;
	
	#use Data::Dumper;
	#print STDERR Dumper($user_value);
</%init>