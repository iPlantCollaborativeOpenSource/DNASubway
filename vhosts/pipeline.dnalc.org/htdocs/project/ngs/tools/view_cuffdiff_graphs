<div id="graphs" class="container_data1">
	<div id="container_data_line_bg">
		<a href="#">< Back</a>
	</div>
	<div id="title"><% $job_title %></div>
	<div id="content">
		<div id="menu" style="float:left">
			<!--<div>Graph Options:</div>-->
			<p>&nbsp;</p>

%	for (@png_files) {
			<a href="javascript:;" onclick="javascript:selectGraph('<% $_->file_path %>');"><img src="https://foundation.iplantcollaborative.org/io-v1/io/download<% $_->file_path%>" width="92px" class="graph-one graph" /></a>
%	}
		</div>
		<div id="graph" style="float:left;padding-left:100px;">
			<img src="https://foundation.iplantcollaborative.org/io-v1/io/download<% $path_to_image %>">
		</div>

		<div style="clear:both;"></div>
	</div>
</div>
<script type="text/javascript">
	function selectGraph(img_src){
		// Get the path of the image depending on the specified type, assign this to the $path_to_image variable
		// update the image on screen using the path obtained above
		$('graph').update('<img src="https://foundation.iplantcollaborative.org/io-v1/io/download' + img_src + '">');
	}
</script>
%#-----------------------------------------------------------------
<%args>
	$pid => 0
	$jid => 0
</%args>

<%once>
	use DNALC::Pipeline::NGS::JobOutputFile ();
</%once>

<%init>

	my @out_files = DNALC::Pipeline::NGS::JobOutputFile->search(job_id => $jid, project_id => $pid);
	my @png_files = grep {!$_->is_local && $_->file_path =~ /\.png$/} map {$_->file } @out_files; 

	my $job_title;
	my $path_to_image; #needs to be set to the first graph type initially

	$path_to_image = @png_files ? $png_files[0]->file_path : '';

	#active_class will be set to active depending on which graph is being displayed
	my $active_class;

</%init>
