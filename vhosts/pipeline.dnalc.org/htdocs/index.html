    	<div id="home_map">
		  <div id="map_left">
			<span id="map_spacer"></span>
     				    <span class="bt_redStart"><a href="#"></a></span>
			<span class="bt_yellowStart"><a href="#"></a></span>
		    <span class="bt_blueStart"><a href="#"></a></span> 
		  </div>
                
		  		<div id="map_right">
                 <div class="containerHoz">
    <ul class="rolloverMap">
    
    <li><span class="spacer1"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">Definition about this step will be here. Thank you for your patience.</span><span class="bottom"></span></span></a></span></li>
    <li><span class="spacer3"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">Definition about this step will be here. Thank you for your patience.</span><span class="bottom"></span></span></a></span></li>
    <li><span class="spacer3"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">Definition about this step will be here. Thank you for your patience.</span><span class="bottom"></span></span></a></span></li>
    <li><span class="spacer3"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">Definition about this step will be here. Thank you for your patience.</span><span class="bottom"></span></span></a></span></li>
    </ul>
 	</div><!--END of CLASS containerHoz-->
    
    
    <div class="containerHoz">
    <ul class="rolloverMap">
    
    <li><span class="spacer1"></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">Definition about this step will be here. Thank you for your patience.</span><span class="bottom"></span></span></a></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">Definition about this step will be here. Thank you for your patience.</span><span class="bottom"></span></span></a></span></li>
    <li><span class="spacer1"></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">Definition about this step will be here. Thank you for your patience.</span><span class="bottom"></span></span></a></span></li>
 
    </ul>
 	</div><!--END of CLASS containerHoz-->
    
    
    
      <div class="containerHoz">
    <!--<ul class="rolloverMap">
    <li><span class="spacer1"></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">Definition about this step will be here. Thank you for your patience.</span><span class="bottom"></span></span></a></span></li>
     </ul>-->

	<span class="spacer1"></span>
    <span class="spacer2"></span>
    <span class="spacer2"></span>
    <span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">Definition about this step will be here. Thank you for your patience.</span><span class="bottom"></span></span></a></span>
 
 	</div><!--END of CLASS containerHoz-->
                 
 		  </div> <!--END of ID map_right----->
     
	  </div><!--END of ID home_map-->
    
    
    <div id="home_intro">This site ties together key bioinformatics tools and databases used to annotate genes and 
analyze genome data.  Roll over any of the “stations” on the subway map to find out more about the analysis steps. Start a project by selecting one of the three “subway lines” 
(red, yellow, blue). Register and login if you want to save or share your results.</div>

%#-------------------------------------------------------------------
<%args>
	$name => ''
	$passw => ''
	$guest => ''
	$login => ''
</%args>
%#-------------------------------------------------------------------
<%once>
	use DNALC::Pipeline::Utils qw/random_string/;
	use DNALC::Pipeline::User ();
	use Time::Duration qw/duration/;
</%once>
%#-------------------------------------------------------------------
<%init>
$m->session->{pipeline} ||= { username => "", logged_in => 0};
my $s = $m->session->{pipeline};

#print STDERR "name = $name//sess =$s->{username} \n";

my @err = ();

if ($r->method eq "POST") {

	my $user;
	
	if ($login) {
		($user) = DNALC::Pipeline::User->search(username => $name);
		$s->{username} = $name;
		unless ($user->password_valid($passw)) {
			$user = undef;
		}
	}
	elsif ($guest) {
		unless ($name) {
			my $rand = lc random_string(6, 8);
			$name = "guest_$rand";

			print STDERR "Generated user: ", $name, $/;
			$user = eval {
					DNALC::Pipeline::User->create({
						username => $name,
						name_first => "Guest",
						name_last => ucfirst $rand,
						email => '',
						password => random_string(8,8)
					});
				};
			if ($@) {
				push @err, $@;
			}
		}
		elsif ($name =~ /^guest_/) {
			($user) = DNALC::Pipeline::User->search(username => $name);
		}
	}
	if ($user){
			$s->{username} = $user->username;
			$s->{full_name} = $user->full_name;
			$s->{user_id} = $user->id;
			$s->{logged_in} = 1;

			$m->redirect("/project/");
	}
	else {
		$m->comp("/_message_add", "Unable to log you in. Try again.");
		$m->redirect("/");
	}
}
else {
	#print STDERR "GET username = ", $s->{username}, $/;
}

</%init>
%#-------------------------------------------------------------------

