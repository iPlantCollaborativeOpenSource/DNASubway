    	<div id="home_map">
		  <div id="map_left">
			<span id="map_spacer"></span>
     				    <span class="bt_redStart"><a href="#" class="Start"><span class="Starttip"><span class="top"></span><span class="middle">Identify the meaningful segments in a DNA sequence and associate this information with the sequence (up to 100,000 nucleotides).</span><span class="bottom"></span></span></a></span>
			<span class="bt_yellowStart"><a href="#" class="Start"><span class="Starttip"><span class="top"></span><span class="middle">Identify sequences that are related to a gene, transposons, or other DNA sequence (up to 10,000 nucleotides).</span><span class="bottom"></span></span></a></span>
		    <span class="bt_blueStart"><a href="#" class="Start"><span class="Starttip"><span class="top"></span><span class="middle">Determine the potential nature of genes in a set of expressed sequence tags (EST; up to 100 megabytes of assembled data).</span><span class="bottom"></span></span></a></span> 
		  </div><!--END of ID map_left-->
                
		  		<div id="map_right">
                 <div class="containerHoz">
    <ul class="rolloverMap">
    
    <li><span class="spacer1"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">
	The RepeatMasker algorithm indentifies and masks repeats and transposons that otherwise obstruct the analysis of DNA.
	</span><span class="bottom"></span></span></a></span></li>
    <li><span class="spacer3"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">
	Gene prediction algorithms highlight regions in DNA that show patterns associated with genes.
	</span><span class="bottom"></span></span></a></span></li>
    <li><span class="spacer3"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">
	Search algorithms, such as BLASTN or BLASTP, search databases of previously discovered genes and proteins for matches to DNA.
	</span><span class="bottom"></span></span></a></span></li>
    <li><span class="spacer3"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">
	Gene prediction and search results may be contradictory and/or incomplete. The annotation editor Apollo helps 
	synthesizing the results of these analyses into gene models.
	</span><span class="bottom"></span></span></a></span></li>
    </ul>
 	</div><!--END of CLASS containerHoz-->
    
    
    <div class="containerHoz">
    <ul class="rolloverMap">
    
    <li><span class="spacer1"></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">
	Search algorithms, such as BLASTN or TBLASTN, search the genome of the same and/or other species for matches to a DNA or protein sequence.
	</span><span class="bottom"></span></span></a></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">
	Display the matches identified in the BLAST search in multiple alignment format and as tree view.
	</span><span class="bottom"></span></span></a></span></li>
    <li><span class="spacer1"></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">
	Genome browsers display analysis results and annotations in a graphical format. Individual genes can also be transferred to the Gene Family track (Yellow Line) to identify related genes, gene function, and to build phylogenetic trees.
	</span><span class="bottom"></span></span></a></span></li>
 
    </ul>
 	</div><!--END of CLASS containerHoz-->
    
    
    
      <div class="containerHoz">
    <!--<ul class="rolloverMap">
    <li><span class="spacer1"></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="spacer2"></span></li>
    <li><span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">Definition about this step will be here. Thank you for your patience.</span><span class="bottom"></span></span></a></span></li>
     </ul>-->

	<span class="spacer1"></span>
    <span class="spacer2"></span>
    <span class="spacer2"></span>
    <span class="conConsole_info"><a href="#" class="info"><span class="infotip"><span class="top"></span><span class="middle">
	The search algorithm BLAT is used to search the genome of the same or other species for matches to EST data.
	</span><span class="bottom"></span></span></a></span>
 
 	</div><!--END of CLASS containerHoz-->
                 
 		  </div> <!--END of ID map_right -->
     
	  </div><!--END of ID home_map-->
    
    
    <div id="home_intro" class="container_text">This site ties together key bioinformatics tools and databases used to annotate genes and 
analyze genome data.  Roll over any of the “stations” on the subway map to find out more about the analysis steps. Start a project by selecting one of the three “subway lines” 
(red, yellow, blue). Register and login if you want to save or share your results.</div>

%#-------------------------------------------------------------------
<%args>
	$name => ''
	$passw => ''
	$guest => ''
	$login => ''
</%args>
%#-------------------------------------------------------------------
<%once>
	use DNALC::Pipeline::Utils qw/random_string/;
	use DNALC::Pipeline::User ();
	use Time::Duration qw/duration/;
</%once>
%#-------------------------------------------------------------------
<%init>
$m->session->{pipeline} ||= { username => "", logged_in => 0};
my $s = $m->session->{pipeline};

#print STDERR "name = $name//sess =$s->{username} \n";

my @err = ();

if ($r->method eq "POST") {

	my $user;

	if ($guest) {
		unless ($name) {
			my $rand = lc random_string(6, 8);
			$name = "guest_$rand";

			print STDERR "Generated user: ", $name, $/;
			$user = eval {
					DNALC::Pipeline::User->create({
						username => $name,
						name_first => "Guest",
						name_last => ucfirst $rand,
						email => '',
						password => random_string(8,8)
					});
				};
			if ($@) {
				push @err, $@;
			}
		}
		elsif ($name =~ /^guest_/) {
			($user) = DNALC::Pipeline::User->search(username => $name);
		}
	}
	else {
		($user) = DNALC::Pipeline::User->search(username => $name);
		$s->{username} = $name;
		unless ($user && $user->password_valid($passw)) {
			$user = undef;
		}
	}
	if ($user){
			$s->{username} = $user->username;
			$s->{full_name} = $user->full_name;
			$s->{user_id} = $user->id;
			$s->{logged_in} = 1;

			$m->redirect("/project/");
	}
	else {
		if ($name =~ /^guest_/) {
			$s->{username} = '';
		}
		$m->comp("/_message_add", "Unable to log you in. Try again.");
		$m->redirect("/");
	}
}
else {
	#print STDERR "GET username = ", $s->{username}, $/;
}

</%init>
%#-------------------------------------------------------------------

